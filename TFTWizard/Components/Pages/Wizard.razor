@page "/wizard"
@using System.Net.Http
@using System.Threading.Tasks

<h3>Fetch DOM of a Website</h3>

<div>
    <input type="text" @bind="Url" placeholder="Enter URL" />
    <button @onclick="FetchDom">Fetch DOM</button>
    <button @onclick="Test">Test</button>
</div>

@if (!string.IsNullOrEmpty(HtmlContent))
{
    <pre>@HtmlContent</pre>
}

@code {
    private string? Url { get; set; }
    private string? HtmlContent { get; set; }

    [Inject]
    private HttpClient? HttpClient { get; set; }

    private void Test()
    {
        
    }

    private async Task FetchDom()
    {
        try
        {
            if (!string.IsNullOrEmpty(Url))
            {
                HtmlContent = await HttpClient.GetStringAsync(Url);
            }
            else
            {
                HtmlContent = "Please enter a valid URL.";
            }
        }
        catch (HttpRequestException)
        {
            HtmlContent = "Failed to fetch DOM. Please check the URL and try again.";
        }
    }
}
